version: 1
name: MyEventLane Theme Audit
on:
  file_change:
    - "web/themes/custom/myeventlane_theme/**/*"

steps:
  - name: ScanTheme
    run: |
      Analyze the entire custom theme under:
        web/themes/custom/myeventlane_theme/
      Identify:
        - Deprecated Twig patterns
        - Missing attach_library calls
        - Vite asset path issues
        - Any SCSS using @import instead of @use
        - Non-mobile-first CSS
        - Missing theme variables
        - Accessibility issues
        - Layout inconsistencies
        - Hard-coded colors or spacing
      Produce a structured JSON summary of issues.

  - name: RecommendFixes
    run: |
      Based on previous scan results, generate detailed recommendations.
      Include:
        - File paths
        - Severity levels (critical, medium, improvement)
        - Suggested rewrites or refactors
        - Notes when full-file rewrites are required

  - name: AutoFixOptional
    run: |
      For issues marked low or medium severity,
      auto-generate improved SCSS/Twig/JS with full file content.
      IMPORTANT:
      Do not auto-apply changes to critical files.
      Present changes to user for approval.