{#
/**
 * @file
 * Vendor analytics section template.
 *
 * Variables:
 * - vendor: Vendor entity.
 * - analytics: Array of analytics data.
 * - events: Array of event data with metrics.
 */
#}
<div class="vendor-analytics-section">
  <h2 class="vendor-analytics-title">{{ 'Vendor Analytics'|t }}</h2>

  {# Key Metrics Cards #}
  <div class="vendor-analytics-kpis">
    <div class="vendor-kpi-card vendor-kpi-card--revenue">
      <div class="kpi-card__header">
        <div class="kpi-card__icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="12" y1="1" x2="12" y2="23"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
          </svg>
        </div>
      </div>
      <div class="kpi-card__label">{{ 'Total Revenue'|t }}</div>
      <div class="kpi-card__value">${{ analytics.total_revenue|number_format(2) }}</div>
      {% if analytics.last_30_days_revenue > 0 %}
        <div class="kpi-card__delta kpi-card__delta--positive">
          ${{ analytics.last_30_days_revenue|number_format(2) }} last 30 days
        </div>
      {% endif %}
    </div>

    <div class="vendor-kpi-card vendor-kpi-card--events">
      <div class="kpi-card__header">
        <div class="kpi-card__icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/>
          </svg>
        </div>
      </div>
      <div class="kpi-card__label">{{ 'Events'|t }}</div>
      <div class="kpi-card__value">{{ analytics.published_events }}</div>
      <div class="kpi-card__delta">
        {{ analytics.total_events }} total
      </div>
    </div>

    <div class="vendor-kpi-card vendor-kpi-card--tickets">
      <div class="kpi-card__header">
        <div class="kpi-card__icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2z"/><path d="M13 5v2M13 17v2M13 11v2"/>
          </svg>
        </div>
      </div>
      <div class="kpi-card__label">{{ 'Tickets Sold'|t }}</div>
      <div class="kpi-card__value">{{ analytics.tickets_sold }}</div>
      <div class="kpi-card__delta">
        {{ analytics.total_orders }} orders
      </div>
    </div>

    <div class="vendor-kpi-card vendor-kpi-card--participants">
      <div class="kpi-card__header">
        <div class="kpi-card__icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/>
          </svg>
        </div>
      </div>
      <div class="kpi-card__label">{{ 'Total Participants'|t }}</div>
      <div class="kpi-card__value">{{ analytics.total_participants }}</div>
      <div class="kpi-card__delta">
        {{ analytics.confirmed_rsvps }} RSVPs, {{ analytics.total_attendees }} attendees
      </div>
    </div>

    <div class="vendor-kpi-card vendor-kpi-card--fees">
      <div class="kpi-card__header">
        <div class="kpi-card__icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="12" y1="1" x2="12" y2="23"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
          </svg>
        </div>
      </div>
      <div class="kpi-card__label">{{ 'Platform Fees'|t }}</div>
      <div class="kpi-card__value">${{ analytics.platform_fees|number_format(2) }}</div>
    </div>

    <div class="vendor-kpi-card vendor-kpi-card--net">
      <div class="kpi-card__header">
        <div class="kpi-card__icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="20 6 9 17 4 12"/>
          </svg>
        </div>
      </div>
      <div class="kpi-card__label">{{ 'Net Revenue'|t }}</div>
      <div class="kpi-card__value">${{ analytics.net_revenue|number_format(2) }}</div>
    </div>
  </div>

  {# Events Breakdown Table #}
  {% if events %}
    <div class="vendor-analytics-events">
      <h3 class="vendor-analytics-subtitle">{{ 'Events Breakdown'|t }} <span class="section-count">({{ events|length }})</span></h3>
      <div class="vendor-events-table-wrapper">
        <table class="vendor-events-table">
          <thead>
            <tr>
              <th>{{ 'Event'|t }}</th>
              <th>{{ 'Date'|t }}</th>
              <th>{{ 'Status'|t }}</th>
              <th>{{ 'Revenue'|t }}</th>
              <th>{{ 'Tickets'|t }}</th>
              <th>{{ 'RSVPs'|t }}</th>
              <th>{{ 'Attendees'|t }}</th>
              <th>{{ 'Total'|t }}</th>
              <th>{{ 'Orders'|t }}</th>
            </tr>
          </thead>
          <tbody>
            {% for event in events %}
              <tr>
                <td>
                  <a href="{{ event.event_url }}" class="event-link">{{ event.event_title }}</a>
                </td>
                <td>{{ event.event_date }}</td>
                <td>
                  <span class="status-badge status-badge--{{ event.status }}">
                    {{ event.status|title }}
                  </span>
                </td>
                <td class="transaction-amount">${{ event.revenue|number_format(2) }}</td>
                <td>{{ event.tickets_sold }}</td>
                <td>{{ event.rsvps }}</td>
                <td>{{ event.attendees }}</td>
                <td><strong>{{ event.total_participants }}</strong></td>
                <td>{{ event.orders }}</td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  {% else %}
    <div class="vendor-analytics-empty">
      <p>{{ 'No events found for this vendor.'|t }}</p>
    </div>
  {% endif %}
</div>















