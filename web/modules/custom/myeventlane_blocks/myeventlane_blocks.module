<?php

/**
 * @file
 * MyEventLane Blocks module.
 */

use Drupal\Core\Routing\RouteMatchInterface;

/**
 * Implements hook_theme().
 */
function myeventlane_blocks_theme($existing, $type, $theme, $path) {
  return [
    'category_pie_chart' => [
      'variables' => [
        'labels' => [],
        'counts' => [],
        'colors' => [],
      ],
      'template' => 'category-pie-chart',
    ],
    'myeventlane_search_block' => [
      'variables' => [],
      'template' => 'myeventlane-search-block',
    ],
    'myeventlane_category_pills' => [
      'variables' => [
        'categories' => [],
      ],
      'template' => 'myeventlane-category-pills',
    ],
  ];
}

/**
 * Implements hook_preprocess_block().
 */
function myeventlane_blocks_preprocess_block(&$variables) {
  // Add directory path for feature block icons.
  if (isset($variables['elements']['#id']) && $variables['elements']['#id'] === 'features') {
    $theme_handler = \Drupal::service('extension.list.theme');
    $theme_path = $theme_handler->getPath('myeventlane_theme');
    $variables['directory'] = '/' . $theme_path;
  }
}
