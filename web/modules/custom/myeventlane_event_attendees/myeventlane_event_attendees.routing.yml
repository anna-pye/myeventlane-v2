# Admin collection list.
myeventlane_event_attendees.collection:
  path: '/admin/structure/event-attendees'
  defaults:
    _entity_list: 'event_attendee'
    _title: 'Event Attendees'
  requirements:
    _permission: 'administer event attendees'
  options:
    _admin_route: TRUE

# Admin view single attendee.
myeventlane_event_attendees.view:
  path: '/admin/structure/event-attendees/{event_attendee}'
  defaults:
    _controller: '\Drupal\myeventlane_event_attendees\Controller\EventAttendeeController::view'
    _title: 'Attendee'
  requirements:
    _permission: 'administer event attendees'
  options:
    _admin_route: TRUE
    parameters:
      event_attendee:
        type: entity:event_attendee

# Vendor: list all attendees for an event.
myeventlane_event_attendees.vendor_list:
  path: '/vendor/event/{node}/attendees'
  defaults:
    _controller: '\Drupal\myeventlane_event_attendees\Controller\VendorAttendeeController::list'
    _title_callback: '\Drupal\myeventlane_event_attendees\Controller\VendorAttendeeController::listTitle'
  requirements:
    _custom_access: '\Drupal\myeventlane_event_attendees\Controller\VendorAttendeeController::access'
    node: '\d+'
  options:
    parameters:
      node:
        type: entity:node

# Vendor: export attendees as CSV.
myeventlane_event_attendees.vendor_export:
  path: '/vendor/event/{node}/attendees/export'
  defaults:
    _controller: '\Drupal\myeventlane_event_attendees\Controller\VendorAttendeeController::export'
    _title: 'Export Attendees'
  requirements:
    _custom_access: '\Drupal\myeventlane_event_attendees\Controller\VendorAttendeeController::access'
    node: '\d+'
  options:
    parameters:
      node:
        type: entity:node

# Vendor: check-in an attendee.
myeventlane_event_attendees.vendor_checkin:
  path: '/vendor/attendee/{event_attendee}/checkin'
  defaults:
    _controller: '\Drupal\myeventlane_event_attendees\Controller\VendorAttendeeController::checkIn'
    _title: 'Check In'
  requirements:
    _custom_access: '\Drupal\myeventlane_event_attendees\Controller\VendorAttendeeController::accessAttendee'
  methods: [POST]
  options:
    parameters:
      event_attendee:
        type: entity:event_attendee

# Get waitlist position for current user.
myeventlane_event_attendees.waitlist_position:
  path: '/event/{node}/waitlist/position'
  defaults:
    _controller: '\Drupal\myeventlane_event_attendees\Controller\WaitlistController::getPosition'
    _format: json
  requirements:
    _custom_access: '\Drupal\myeventlane_event_attendees\Controller\WaitlistController::accessPosition'
    node: '\d+'
  options:
    parameters:
      node:
        type: entity:node

# Vendor: waitlist management for an event.
myeventlane_event_attendees.waitlist_manage:
  path: '/vendor/event/{node}/waitlist'
  defaults:
    _controller: '\Drupal\myeventlane_event_attendees\Controller\WaitlistManagementController::list'
    _title_callback: '\Drupal\myeventlane_event_attendees\Controller\WaitlistManagementController::listTitle'
  requirements:
    _custom_access: '\Drupal\myeventlane_event_attendees\Controller\WaitlistManagementController::access'
    node: '\d+'
  options:
    parameters:
      node:
        type: entity:node
        bundle:
          - event

# Vendor: export waitlist as CSV.
myeventlane_event_attendees.waitlist_export:
  path: '/vendor/event/{node}/waitlist/export'
  defaults:
    _controller: '\Drupal\myeventlane_event_attendees\Controller\WaitlistManagementController::export'
    _title: 'Export Waitlist'
  requirements:
    _custom_access: '\Drupal\myeventlane_event_attendees\Controller\WaitlistManagementController::access'
    node: '\d+'
  options:
    parameters:
      node:
        type: entity:node
        bundle:
          - event

# Public waitlist signup form.
myeventlane_event_attendees.waitlist_signup:
  path: '/event/{node}/waitlist/signup'
  defaults:
    _form: '\Drupal\myeventlane_event_attendees\Form\WaitlistSignupForm'
    _title: 'Join Waitlist'
  requirements:
    node: '\d+'
  options:
    parameters:
      node:
        type: entity:node
        bundle:
          - event
