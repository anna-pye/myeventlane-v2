// ==========================================================================
// Taxonomy Tag Colors
// ==========================================================================
// Standardized category tag colors using MEL palette.

@use 'sass:color';
@use 'sass:map';
@use '../tokens/colors';
@use '../tokens/typography';
@use '../tokens/spacing';
@use '../tokens/radii';

// ---------------------------------------------------------------------------
// Category Color Map (MEL Brand Colors)
// ---------------------------------------------------------------------------

$category-colors: (
  "music": #A8C8FF,
  "workshop": #FFE2B2,
  "food-drink": #FBC6C6,
  "food & drink": #FBC6C6,
  "lgbtq": #D6C6FF,
  "lgbtqi+": #D6C6FF,
  "arts": #B7F1DC,
  "movie": #F4B9EF,
  "community": #BBE9F3,
  "sports": #FFE2B2,
  "tech": #A8C8FF,
  "education": #B7F1DC,
  "wellness": #B7F1DC,
);

// ---------------------------------------------------------------------------
// Category Button Base (Solid Fill)
// ---------------------------------------------------------------------------

.category-button {
  display: inline-block;
  padding: spacing.mel-space(2) spacing.mel-space(4);
  border-radius: radii.$mel-radius-full;
  font-size: typography.mel-font-size(sm);
  font-weight: typography.$mel-font-medium;
  text-decoration: none;
  border: none;
  margin: 0 spacing.mel-space(1) spacing.mel-space(2) 0;
  cursor: pointer;
  transition: transform 0.15s ease, box-shadow 0.15s ease;

  &:hover {
    transform: translateY(-1px);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  }

  &:focus-visible {
    @include colors.mel-focus-ring;
  }

  // Dynamic color classes - solid fill
  // Handle each category explicitly to avoid interpolation issues
  &.tag-music {
    background-color: map.get($category-colors, "music");
    color: color.adjust(map.get($category-colors, "music"), $lightness: -40%);
  }
  &.tag-workshop {
    background-color: map.get($category-colors, "workshop");
    color: color.adjust(map.get($category-colors, "workshop"), $lightness: -40%);
  }
  &.tag-food-drink,
  &.tag-food-and-drink,
  &.tag-food {
    background-color: map.get($category-colors, "food-drink");
    color: color.adjust(map.get($category-colors, "food-drink"), $lightness: -40%);
  }
  &.tag-lgbtq,
  &.tag-lgbtqi {
    background-color: map.get($category-colors, "lgbtq");
    color: color.adjust(map.get($category-colors, "lgbtq"), $lightness: -40%);
  }
  &.tag-arts {
    background-color: map.get($category-colors, "arts");
    color: color.adjust(map.get($category-colors, "arts"), $lightness: -40%);
  }
  &.tag-movie {
    background-color: map.get($category-colors, "movie");
    color: color.adjust(map.get($category-colors, "movie"), $lightness: -40%);
  }
  &.tag-community {
    background-color: map.get($category-colors, "community");
    color: color.adjust(map.get($category-colors, "community"), $lightness: -40%);
  }
  &.tag-sports {
    background-color: map.get($category-colors, "sports");
    color: color.adjust(map.get($category-colors, "sports"), $lightness: -40%);
  }
  &.tag-tech {
    background-color: map.get($category-colors, "tech");
    color: color.adjust(map.get($category-colors, "tech"), $lightness: -40%);
  }
  &.tag-education {
    background-color: map.get($category-colors, "education");
    color: color.adjust(map.get($category-colors, "education"), $lightness: -40%);
  }
  &.tag-wellness {
    background-color: map.get($category-colors, "wellness");
    color: color.adjust(map.get($category-colors, "wellness"), $lightness: -40%);
  }
  &.tag-all {
    background-color: colors.$mel-color-primary;
    color: colors.$mel-color-text-inverse;
  }
}

// ---------------------------------------------------------------------------
// Category Tag Base (Legacy support)
// ---------------------------------------------------------------------------

.category-tag {
  display: inline-block;
  padding: spacing.mel-space(1) spacing.mel-space(3);
  border-radius: radii.$mel-radius-full;
  font-size: typography.mel-font-size(sm);
  font-weight: typography.$mel-font-medium;
  text-decoration: none;
  transition: transform 0.15s ease, box-shadow 0.15s ease;

  &:hover {
    transform: translateY(-1px);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  }

  // Dynamic color classes (legacy support)
  &--dynamic {
    &.tag-music {
      background-color: map.get($category-colors, "music");
      color: color.adjust(map.get($category-colors, "music"), $lightness: -50%, $saturation: +20%);
    }
    &.tag-workshop {
      background-color: map.get($category-colors, "workshop");
      color: color.adjust(map.get($category-colors, "workshop"), $lightness: -50%, $saturation: +20%);
    }
    &.tag-food-drink,
    &.tag-food {
      background-color: map.get($category-colors, "food-drink");
      color: color.adjust(map.get($category-colors, "food-drink"), $lightness: -50%, $saturation: +20%);
    }
    &.tag-lgbtq,
    &.tag-lgbtqi {
      background-color: map.get($category-colors, "lgbtq");
      color: color.adjust(map.get($category-colors, "lgbtq"), $lightness: -50%, $saturation: +20%);
    }
    &.tag-arts {
      background-color: map.get($category-colors, "arts");
      color: color.adjust(map.get($category-colors, "arts"), $lightness: -50%, $saturation: +20%);
    }
    &.tag-movie {
      background-color: map.get($category-colors, "movie");
      color: color.adjust(map.get($category-colors, "movie"), $lightness: -50%, $saturation: +20%);
    }
    &.tag-community {
      background-color: map.get($category-colors, "community");
      color: color.adjust(map.get($category-colors, "community"), $lightness: -50%, $saturation: +20%);
    }
  }
}

// ---------------------------------------------------------------------------
// Category Tag Variants (explicit classes)
// ---------------------------------------------------------------------------

.category-tag--music {
  background-color: map.get($category-colors, "music");
  color: color.adjust(map.get($category-colors, "music"), $lightness: -50%);
}

.category-tag--workshop {
  background-color: map.get($category-colors, "workshop");
  color: color.adjust(map.get($category-colors, "workshop"), $lightness: -50%);
}

.category-tag--food-drink,
.category-tag--food {
  background-color: map.get($category-colors, "food-drink");
  color: color.adjust(map.get($category-colors, "food-drink"), $lightness: -50%);
}

.category-tag--lgbtq,
.category-tag--lgbtqi {
  background-color: map.get($category-colors, "lgbtq");
  color: color.adjust(map.get($category-colors, "lgbtq"), $lightness: -50%);
}

.category-tag--arts {
  background-color: map.get($category-colors, "arts");
  color: color.adjust(map.get($category-colors, "arts"), $lightness: -50%);
}

.category-tag--movie {
  background-color: map.get($category-colors, "movie");
  color: color.adjust(map.get($category-colors, "movie"), $lightness: -50%);
}

.category-tag--community {
  background-color: map.get($category-colors, "community");
  color: color.adjust(map.get($category-colors, "community"), $lightness: -50%);
}

// ---------------------------------------------------------------------------
// Category Pie Chart Styles
// ---------------------------------------------------------------------------

.category-pie-chart-wrapper {
  padding: spacing.mel-space(6);
  background: colors.$mel-color-surface;
  border-radius: radii.$mel-radius-xl;
  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.04);
  margin: spacing.mel-space(6) 0;
}

.category-pie-chart-title {
  font-size: typography.mel-font-size(xl);
  font-weight: typography.$mel-font-bold;
  color: colors.$mel-color-text;
  margin: 0 0 spacing.mel-space(4) 0;
  text-align: center;
}

.category-pie-chart-container {
  position: relative;
  max-width: 480px;
  margin: 0 auto;
  
  canvas {
    max-width: 100%;
    height: auto;
  }
}
