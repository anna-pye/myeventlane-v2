function v(){const n=document.querySelector(".mel-nav-toggle"),s=document.querySelector(".mel-nav-mobile-wrapper"),r=document.querySelector(".mel-nav-mobile-close");if(!n||!s)return;let e=document.querySelector(".mel-nav-overlay");e||(e=document.createElement("div"),e.className="mel-nav-overlay",e.setAttribute("aria-hidden","true"),document.body.appendChild(e));function l(){s.classList.add("is-open"),n.classList.add("is-active"),e.classList.add("is-visible"),n.setAttribute("aria-expanded","true"),document.body.style.overflow="hidden";const t=s.querySelector("a");t&&t.focus()}function i(){s.classList.remove("is-open"),n.classList.remove("is-active"),e.classList.remove("is-visible"),n.setAttribute("aria-expanded","false"),document.body.style.overflow="",n.focus()}n.addEventListener("click",()=>{s.classList.contains("is-open")?i():l()}),r&&r.addEventListener("click",i),e.addEventListener("click",i),document.addEventListener("keydown",t=>{t.key==="Escape"&&s.classList.contains("is-open")&&i()}),window.matchMedia("(min-width: 768px)").addEventListener("change",t=>{t.matches&&s.classList.contains("is-open")&&i()})}function m(){function n(s=document){const r=s.querySelectorAll(".mel-account-dropdown:not([data-dropdown-initialized])");r.length!==0&&r.forEach(e=>{const l=e.querySelector(".mel-account-toggle"),i=e.querySelector(".mel-account-menu");if(!l||!i)return;e.setAttribute("data-dropdown-initialized","true"),l.addEventListener("click",function(o){o.preventDefault(),o.stopPropagation(),e.classList.contains("is-open")?(e.classList.remove("is-open"),l.setAttribute("aria-expanded","false"),i.setAttribute("aria-hidden","true")):(document.querySelectorAll(".mel-account-dropdown.is-open").forEach(c=>{if(c!==e){c.classList.remove("is-open");const d=c.querySelector(".mel-account-toggle"),f=c.querySelector(".mel-account-menu");d&&d.setAttribute("aria-expanded","false"),f&&f.setAttribute("aria-hidden","true")}}),e.classList.add("is-open"),l.setAttribute("aria-expanded","true"),i.setAttribute("aria-hidden","false"))});const a=function(o){!e.contains(o.target)&&e.classList.contains("is-open")&&(e.classList.remove("is-open"),l.setAttribute("aria-expanded","false"),i.setAttribute("aria-hidden","true"))};document.addEventListener("click",a,!0);const t=function(o){o.key==="Escape"&&e.classList.contains("is-open")&&(e.classList.remove("is-open"),l.setAttribute("aria-expanded","false"),i.setAttribute("aria-hidden","true"),l.focus())};document.addEventListener("keydown",t)})}n(),document.readyState==="loading"&&document.addEventListener("DOMContentLoaded",()=>n()),typeof Drupal<"u"&&Drupal.behaviors&&(Drupal.behaviors.myeventlaneAccountDropdown={attach:function(s,r){n(s)}})}(function(n){n.behaviors.myeventlaneEventForm={attach:function(s,r){const e=s.querySelector('.mel-event-form-wrapper, .mel-form--event, form.node-event-form, form[id*="node-event"]');if(!e)return;if(typeof n.states>"u"){console.warn("Drupal.states not available - conditional fields may not work");return}setTimeout(function(){n.states&&n.states.Trigger&&e.querySelectorAll("[data-drupal-states]").forEach(function(o){if(o.closest("form")){const c=new Event("change",{bubbles:!0});o.dispatchEvent(c)}})},100),e.querySelectorAll(".js-form-item, [data-drupal-states]").forEach(function(t){t.hasAttribute("data-field-monitored")||(t.setAttribute("data-field-monitored","true"),new MutationObserver(function(u){u.forEach(function(c){if(c.type==="attributes"&&(c.attributeName==="style"||c.attributeName==="class")){const d=t.offsetParent!==null&&!t.classList.contains("js-form-item--hidden");t.classList.toggle("mel-field-visible",d),t.classList.toggle("mel-field-hidden",!d)}})}).observe(t,{attributes:!0,attributeFilter:["style","class"]}))});const i=['select[name="field_event_type[0][value]"]','select[name*="field_event_type"]','[name="field_event_type"]','select[name^="field_event_type"]'];let a=null;for(let t=0;t<i.length;t++)if(a=e.querySelector(i[t]),a){console.log("Found event type field with selector:",i[t]);break}a?(setTimeout(function(){if(n.states&&n.states.Trigger){n.states.Trigger.states[a.id||a.name]={};const t=new Event("change",{bubbles:!0,cancelable:!0});a.dispatchEvent(t)}},200),a.addEventListener("change",function(){var o;const t=this.value||this.options&&((o=this.options[this.selectedIndex])==null?void 0:o.value);console.log("Event type changed to:",t),setTimeout(function(){if(n.states&&n.states.Trigger){const u=new Event("change",{bubbles:!0,cancelable:!0});a.dispatchEvent(u),e.querySelectorAll("input, select, textarea").forEach(function(d){if(d!==a){const f=new Event("change",{bubbles:!0,cancelable:!0});d.dispatchEvent(f)}})}},100)})):console.warn("Could not find event type field in form")}}})(Drupal);(function(){function n(s){s===document&&(document.documentElement.classList.contains("js-loaded")||(v(),m(),setTimeout(function(){m()},200),document.documentElement.classList.add("js-loaded")))}typeof Drupal<"u"&&Drupal.behaviors&&(Drupal.behaviors.myeventlaneTheme={attach:function(s,r){n(s)}}),document.readyState==="loading"?document.addEventListener("DOMContentLoaded",function(){document.documentElement.classList.contains("js-loaded")||n(document)}):document.documentElement.classList.contains("js-loaded")||n(document)})();
