function p(){const t=document.querySelector(".mel-nav-toggle"),i=document.querySelector(".mel-nav-mobile-wrapper"),d=document.querySelector(".mel-nav-mobile-close");if(!t||!i)return;let e=document.querySelector(".mel-nav-overlay");e||(e=document.createElement("div"),e.className="mel-nav-overlay",e.setAttribute("aria-hidden","true"),document.body.appendChild(e));function a(){i.classList.add("is-open"),t.classList.add("is-active"),e.classList.add("is-visible"),t.setAttribute("aria-expanded","true"),document.body.style.overflow="hidden";const n=i.querySelector("a");n&&n.focus()}function s(){i.classList.remove("is-open"),t.classList.remove("is-active"),e.classList.remove("is-visible"),t.setAttribute("aria-expanded","false"),document.body.style.overflow="",t.focus()}t.addEventListener("click",()=>{i.classList.contains("is-open")?s():a()}),d&&d.addEventListener("click",s),e.addEventListener("click",s),document.addEventListener("keydown",n=>{n.key==="Escape"&&i.classList.contains("is-open")&&s()}),window.matchMedia("(min-width: 768px)").addEventListener("change",n=>{n.matches&&i.classList.contains("is-open")&&s()})}function f(){function t(i=document){const d=i.querySelectorAll(".mel-account-dropdown:not([data-dropdown-initialized])");d.length!==0&&d.forEach(e=>{const a=e.querySelector(".mel-account-toggle"),s=e.querySelector(".mel-account-menu");if(!a||!s)return;e.setAttribute("data-dropdown-initialized","true"),a.addEventListener("click",function(c){c.preventDefault(),c.stopPropagation(),e.classList.contains("is-open")?(e.classList.remove("is-open"),a.setAttribute("aria-expanded","false"),s.setAttribute("aria-hidden","true")):(document.querySelectorAll(".mel-account-dropdown.is-open").forEach(r=>{if(r!==e){r.classList.remove("is-open");const u=r.querySelector(".mel-account-toggle"),m=r.querySelector(".mel-account-menu");u&&u.setAttribute("aria-expanded","false"),m&&m.setAttribute("aria-hidden","true")}}),e.classList.add("is-open"),a.setAttribute("aria-expanded","true"),s.setAttribute("aria-hidden","false"))});const o=function(c){!e.contains(c.target)&&e.classList.contains("is-open")&&(e.classList.remove("is-open"),a.setAttribute("aria-expanded","false"),s.setAttribute("aria-hidden","true"))};document.addEventListener("click",o,!0);const n=function(c){c.key==="Escape"&&e.classList.contains("is-open")&&(e.classList.remove("is-open"),a.setAttribute("aria-expanded","false"),s.setAttribute("aria-hidden","true"),a.focus())};document.addEventListener("keydown",n)})}t(),document.readyState==="loading"&&document.addEventListener("DOMContentLoaded",()=>t()),typeof Drupal<"u"&&Drupal.behaviors&&(Drupal.behaviors.myeventlaneAccountDropdown={attach:function(i,d){t(i)}})}(function(t){t.behaviors.myeventlaneEventForm={attach:function(i,d){const e=i.querySelector('.mel-event-form-wrapper, .mel-form--event, form.node-event-form, form[id*="node-event"]');if(!e)return;if(typeof t.states>"u"){console.warn("Drupal.states not available - conditional fields may not work");return}setTimeout(function(){t.states&&t.states.Trigger&&e.querySelectorAll("[data-drupal-states]").forEach(function(n){if(n.closest("form")){const l=new Event("change",{bubbles:!0});n.dispatchEvent(l)}})},100),e.querySelectorAll(".js-form-item, [data-drupal-states]").forEach(function(o){o.hasAttribute("data-field-monitored")||(o.setAttribute("data-field-monitored","true"),new MutationObserver(function(c){c.forEach(function(l){if(l.type==="attributes"&&(l.attributeName==="style"||l.attributeName==="class")){const r=o.offsetParent!==null&&!o.classList.contains("js-form-item--hidden");o.classList.toggle("mel-field-visible",r),o.classList.toggle("mel-field-hidden",!r)}})}).observe(o,{attributes:!0,attributeFilter:["style","class"]}))});const s=e.querySelector('[name="field_event_type"], select[name*="field_event_type"], input[name*="field_event_type"]');s&&s.addEventListener("change",function(){var n;const o=this.value||this.options&&((n=this.options[this.selectedIndex])==null?void 0:n.value);console.log("Event type changed to:",o),setTimeout(function(){e.querySelectorAll("[data-drupal-states]").forEach(function(l){const r=new Event("change",{bubbles:!0});l.dispatchEvent(r)})},50)})}}})(Drupal);function v(){console.log("MyEventLane theme JS initializing..."),p(),f(),setTimeout(()=>{f()},200),document.documentElement.classList.add("js-loaded"),console.log("MyEventLane theme JS initialized"),console.log("Account dropdowns found:",document.querySelectorAll(".mel-account-dropdown").length)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",v):v();
