{#
/**
 * @file
 * Template for the event booking page.
 *
 * Available variables:
 * - title: The event title.
 * - event_date_text: Formatted event date string.
 * - venue_text: Venue name or location.
 * - hero_url: URL to hero image (optional).
 * - matrix_form: Render array for the product add-to-cart form.
 */
#}
<div class="mel-event-book-page">
  {% if hero_url %}
    <div class="mel-event-book-hero">
      <img src="{{ hero_url }}" alt="{{ title }}" loading="eager">
    </div>
  {% endif %}

  <div class="mel-container" style="max-width: 1200px; margin: 2rem auto; padding: 0 1rem;">
    <div class="mel-event-book-layout" style="display: grid; grid-template-columns: 1fr 400px; gap: 2rem; align-items: start;">
      
      {# Event Info Card (Right Side) - Similar to front page cards #}
      <aside class="mel-event-book-card mel-event-card" style="
        background: #fff;
        border-radius: 16px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        padding: 1.5rem;
        position: sticky;
        top: 2rem;
        display: flex;
        flex-direction: column;
      ">
        <h2 class="mel-event-book-card-title" style="
          font-size: 1.5rem;
          font-weight: 700;
          color: #1a1a2e;
          margin: 0 0 1rem 0;
        ">{{ title }}</h2>
        
        {% if event_date_text %}
          <div class="mel-event-book-card-meta" style="
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.75rem;
            color: #666;
            font-size: 0.9rem;
          ">
            <span>üìÖ</span>
            <span>{{ event_date_text }}</span>
          </div>
        {% endif %}
        
        {% if venue_text %}
          <div class="mel-event-book-card-meta" style="
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            color: #666;
            font-size: 0.9rem;
          ">
            <span>üìç</span>
            <span>{{ venue_text }}</span>
          </div>
        {% endif %}

        {# Add to Cart Form #}
        <div class="mel-event-book-form" style="margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid #eee;">
          {% if matrix_form %}
            {# Render the entire form - Commerce will handle the structure #}
            {{ matrix_form }}
          {% else %}
            <div class="mel-alert mel-alert--warning" style="
              padding: 1rem;
              background: #fff3cd;
              border: 1px solid #ffc107;
              border-radius: 8px;
              color: #856404;
            ">
              <p style="margin: 0;">{{ 'No tickets available for this event.'|t }}</p>
            </div>
          {% endif %}
        </div>
      </aside>

      {# Main Content Area (Left Side) - Reserved for future content #}
      <div class="mel-event-book-main" style="min-height: 400px;">
        {# Can add event description, details, etc. here in the future #}
      </div>

    </div>
  </div>
</div>

<style>
/* Responsive layout */
@media (max-width: 768px) {
  .mel-event-book-layout {
    grid-template-columns: 1fr !important;
  }
  
  .mel-event-book-card {
    position: static !important;
  }
}

/* Form styling */
.mel-event-book-form .form-item {
  margin-bottom: 1rem;
}

.mel-event-book-form label {
  display: block;
  font-weight: 600;
  margin-bottom: 0.5rem;
  color: #1a1a2e;
  font-size: 0.9rem;
}

.mel-event-book-form .form-actions {
  margin-top: 1.5rem;
}

.mel-event-book-form .button--add-to-cart,
.mel-event-book-form input[type='submit'],
.mel-event-book-form button[type='submit'] {
  width: 100%;
  padding: 0.75rem 1.5rem;
  background: #ff6b35;
  color: white;
  border: none;
  border-radius: 8px;
  font-weight: 600;
  font-size: 1rem;
  cursor: pointer;
  transition: background 0.2s;
}

.mel-event-book-form .button--add-to-cart:hover,
.mel-event-book-form input[type='submit']:hover,
.mel-event-book-form button[type='submit']:hover {
  background: #e55a2b;
}

/* Hide form elements that shouldn't be visible */
.mel-event-book-form .visually-hidden {
  position: absolute !important;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  width: 1px;
  height: 1px;
  word-wrap: normal;
}
</style>

